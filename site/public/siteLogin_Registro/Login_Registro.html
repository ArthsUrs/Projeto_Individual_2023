<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login e Registro</title>
    <link rel="stylesheet" href="StyleLogin.css">

</head>

<body>
    <div class="title">
        <div class="color">
            <h1>
                The Legend of Zelda: <br>
                <h2>
                    Entre ou Registre-se
                </h2>
            </h1>
        </div>
    </div>

    <div class="login" id="login">
        <div class="container">
            <div class="formulario">
                <div class="image">
                    <img src="imagensLogin_Registro/fundoZeldaCortado2.png" alt="">
                </div>
                <div class="campos">
                    <div class="imagem">

                    </div>
                    <div class="titulo">
                        <h1>
                            Entre com seus dados:
                        </h1>
                    </div>
                    <div class="email">
                        <h1>
                            Login:
                        </h1>
                        <br>
                        <input type="password" id="i_LoginEmail" placeholder="Entre com seu email" required>
                    </div>
                    <div class="senha">
                        <h1>
                            Senha:
                        </h1>
                        <br>
                        <input type="password" id="i_LoginEmail" placeholder="Entre com seu email" required> <br>
                    </div>
                    <div class="redirecionar">
                        <h3>Nao esta registrado ainda?</h3>
                        <p class="paragrafoRedirecionar" onclick="redirecionarToRegister()">
                            registre-se agora!
                        </p>
                        </a>
                    </div>
                    <button onclick="entrar()">
                        Entrar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="register" id="register">
        <div class="container">
            <div class="forms">
                <div class="image">
                    <img src="imagensLogin_Registro/linkFundo.png" alt="">
                </div>
                <div class="campos">
                    <div class="titulo">
                        <h1>
                            Entre com os dados para cadastro
                        </h1>
                    </div>
                    <div class="email">
                        <h1>
                            Entre com o Email:
                        </h1>
                        <input type="text" value="Arthur@gmai.com" placeholder="seuEmail@gmail.com" id="i_emailCadastro"
                            required>
                    </div>
                    <div class="senha">
                        <h1>
                            Entre com a senha
                        </h1>
                        <br>
                        <input type="text" value="123" id="i_senhaCadastro" placeholder="Escolha uma boa senha"
                            required>
                    </div>
                    <div class="nome">
                        <h1>
                            Entre com o seu Nickname:
                        </h1>
                        <input type="text" value="Arthur123" id="i_nomeCadastro" placeholder="Escolha um bom nome"
                            required>
                    </div>

                    <div class="idade">
                        <h1>
                            Escolha um titulo preferido da serie!
                        </h1>

                        <select name="select_jogosPreferidos" id="select_jogosPreferidos">
                            <option value="1">
                                The Legend of Zelda: Skyward Sword
                            </option>
                            <option value="2">
                                The Legend of Zelda: Minish Cap
                            </option>
                            <option value="3">
                                The Legend of Zelda: Ocarina of Time
                            </option>
                            <option value="4">
                                The Legend of Zelda: A Link to the past
                            </option>
                            <option value="5">
                                The Legend of Zelda: Oracle of Seasons/Ages
                            </option>
                            <option value="6">
                                The Legend of Zelda
                            </option>
                            <option value="7">
                                Zelda II: adventure of Link
                            </option>
                            <option value="8">
                                The Legend of Zelda: Majora's Mask
                            </option>
                            <option value="9">
                                The Legend of Zelda: Twilight Princess
                            </option>
                            <option value="10">
                                The Legend of Zelda: Fours Sword's
                            </option>
                            <option value="11">
                                The Legend of Zelda: The Wind Waker
                            </option>
                            <option value="12">
                                The Legend of Zelda: Phantom Hourglass
                            </option>
                            <option value="13">
                                The Legend of Zelda: Spirit Track
                            </option>
                            <option value="14">
                                The Legend of Zelda: Breath of The Wild
                            </option>
                            <option value="15">
                                The Legend of Zelda: Tears of the Kingdom
                            </option>
                        </select>
                    </div>
                    <div class="redirecionar">
                        <h3><label for="paragrafoRedirecionar">Ja se registrou?</label></h3>
                        <p class="paragrafoRedirecionar" onclick="redirecionarToLogin()">
                            Entre com seu Login
                        </p>
                        </a>
                    </div>
                    <button onclick="cadastrar()">
                        Registre-se
                    </button>
                </div>
            </div>
        </div>
    </div>
</body>

</html>

<script>

    var trocadorLogin = document.getElementById("login");
    var trocadorRegister = document.getElementById("register");

    function redirecionarToRegister() {
        trocadorLogin.style.display = "none";
        trocadorRegister.style.display = "flex"
    }

    function redirecionarToLogin() {
        trocadorRegister.style.display = "none"; trocadorLogin.style.display = "flex"
    }

    // CADASTRAR

    function cadastrar() {

        var emailVar = i_emailCadastro.value;
        var senhaVar = i_senhaCadastro.value;
        var nomeVar = i_nomeCadastro.value;

        if (
            emailVar == "" ||
            senhaVar == "" ||
            nomeVar == ""
        ) {
            alert("Preencha todos os campos, por favor")

            finalizarAguardar();
            return false;
        }

        // Enviando o valor da nova input
        fetch("/usuarios/cadastrar", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                nomeServer: nomeVar,
                emailServer: emailVar,
                senhaServer: senhaVar,
            }),
        })
            .then(function (resposta) {
                console.log("resposta: ", resposta);

                if (resposta.ok) {
                    alert("Cadastro realizado com sucesso! Redirecionando para tela de Login...")
                    limparFormulario();
                } else {
                    throw "Houve um erro ao tentar realizar o cadastro!";
                }
            })
            .catch(function (resposta) {
                console.log(`#ERRO: ${resposta}`);
            });
        return false;
    }

    function listar() {
        fetch("/empresas/listar", {
            method: "GET",
        })
            .then(function (resposta) {
                resposta.json().then((empresas) => {
                    empresas.forEach((empresa) => {
                        listaEmpresas.innerHTML += `<option value='${empresa.id}'>${empresa.cnpj}</option>`;
                    });
                });
            })
            .catch(function (resposta) {
                console.log(`#ERRO: ${resposta}`);
            });
    }

    //cadastrar


    // LOGIN

    // function entrar() {
    //     aguardar();

    //     var emailVar = email_input.value;
    //     var senhaVar = senha_input.value;

    //     if (emailVar == "" || senhaVar == "") {
    //         cardErro.style.display = "block"
    //         mensagem_erro.innerHTML = "(Mensagem de erro para todos os campos em branco)";
    //         finalizarAguardar();
    //         return false;
    //     }
    //     else {
    //         setInterval(sumirMensagem, 5000)
    //     }

    //     console.log("FORM LOGIN: ", emailVar);
    //     console.log("FORM SENHA: ", senhaVar);

    //     fetch("/usuarios/autenticar", {
    //         method: "POST",
    //         headers: {
    //             "Content-Type": "application/json"
    //         },
    //         body: JSON.stringify({
    //             emailServer: emailVar,
    //             senhaServer: senhaVar
    //         })
    //     }).then(function (resposta) {
    //         console.log("ESTOU NO THEN DO entrar()!")

    //         if (resposta.ok) {
    //             console.log(resposta);

    //             resposta.json().then(json => {
    //                 console.log(json);
    //                 console.log(JSON.stringify(json));
    //                 sessionStorage.EMAIL_USUARIO = json.email;
    //                 sessionStorage.NOME_USUARIO = json.nome;
    //                 sessionStorage.ID_USUARIO = json.id;
    //                 sessionStorage.AQUARIOS = JSON.stringify(json.aquarios)

    //                 setTimeout(function () {
    //                     window.location = "./dashboard/cards.html";
    //                 }, 1000); // apenas para exibir o loading

    //             });

    //         } else {

    //             console.log("Houve um erro ao tentar realizar o login!");

    //             resposta.text().then(texto => {
    //                 console.error(texto);
    //                 finalizarAguardar(texto);
    //             });
    //         }

    //     }).catch(function (erro) {
    //         console.log(erro);
    //     })

    //     return false;
    // }

    // function sumirMensagem() {
    //     cardErro.style.display = "none"
    // }


    // login
</script>